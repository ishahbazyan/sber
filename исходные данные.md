# Настройка завершения работы с БД PostgreSQL

После окончания действий в СУБД (настройка подключения была рассмотрена в разделе [Настройка подключения по mTLS к базе данных PostgreSQL](https://github.com/ishahbazyan/sber/blob/main/index.md#настройка-подключения-по-mtls-к-базе-данных-postgresql)) требуется корректно завершить работу во избежание потери данных, 

> Требуемые привилегии:  
> Роль Суперадминистратор.

Для настройки корректного завершения работы Суперадминистратору требуется определить глобальные переменные в файлах из таблицы ниже. 

| Файл | Параметр |
| -----| ---------|
|\conf\openshift\ufs-security\dc.yaml | terminationGracePeriodSeconds: ${ufs-security.ose.deployment.spec.template.spec.terminationGracePeriodSeconds} |
| \conf\openshift\ufs-security-manager\dc.yaml | terminationGracePeriodSeconds: ${ufs-security-manager.ose.deployment.spec.template.spec.terminationGracePeriodSeconds} |
| \conf\openshift\ufs-security-import\dc.yaml | terminationGracePeriodSeconds: ${ufs-security-import.ose.deployment.spec.template.spec.terminationGracePeriodSeconds} |
| \conf\openshift\istio\deployments\ingress\dc-ingress.yaml | terminationGracePeriodSeconds: ${ufs-security.ose.istio.ingress.deployment.spec.template.spec.terminationGracePeriodSeconds} |
| \conf\openshift\istio\deployments\egress\dc-egress.yaml | terminationGracePeriodSeconds: ${ufs-security.ose.istio.egress.deployment.spec.template.spec.terminationGracePeriodSeconds} |

> Значение параметра `TERMINATION_DRAIN_DURATION_SECONDS`  по умолчанию из переменных среды (ENV) составляет 60.

По итогу работы рекомендуется ознакомиться с записями в системном журнале. Информация по работе с системным журналом (компонент **Журналирование**) приведена в разделе [События системного журнала](https://github.com/ishahbazyan/sber/blob/main/index.md#события-системного-журнала) и его подразделах.